# 背景
这是我在跟着代码随想录进行算法学习的代码笔记
分享出来，希望能够对大家有帮助~

# 相关网址
[代码随想录官网](https://programmercarl.com)

2025-05-20
(1) 今日内容：
- 通过智研流水线构建cam_diff的fearture/v0.0.2分支的镜像并部署到tke
  https://kubernetes.woa.com/v4/projects/prj22kwl/workloads/cls-qzr0esc6/ns-prj22kwl-1570084-dev-test/StatefulSetPlus/cam-diff-cache-test
- 通过智研流水线构建cam_diff_udp_client的镜像并部署到tke
  https://kubernetes.woa.com/v4/projects/prj22kwl/workloads/cls-qzr0esc6/ns-prj22kwl-1570084-dev-test/StatefulSetPlus/test-cam-diff-cache-client

(2) 明日计划：
- 拉取七彩石配置，进行对cam_diff测试

(3) 是否存在问题：
- 代码仓库的权限问题，已解决


2025-05-21
(1) 今日内容：
- 拉取七彩石配置，完成对cam_diff测试，说明及测试文档：https://iwiki.woa.com/p/4014602929
- 提交master分支和feature/v0.0.2的merge请求，根据AI评审提出的建议对代码进行了一些修改

(2) 明日计划：
- 推进内部接口分类分级项目进度：七彩石、工蜂仓库 -> 构建镜像 -> tke

(3) 是否存在问题：
- 无

2025-05-22
(1) 今日内容：
- 查看pcg_check_resource鉴权的定时任务，crontab配置了但是正常执行，将定时任务的逻辑修改为go代码内部实现
- 申请了跳板机权限，测试了scm获取临时密钥逻辑
- 测试feature/v0.0.2并入master分支后的cam_diff的基本功能，后续修改方向：
  - 配置改为多个Forward
  - 删除Uin==0拦截判断
  - 修改Action的匹配逻辑：根据request包（json），而不是外部的Action
  - 拆分entrypoint.sh和start.sh，增加保活逻辑
  - 增加match拦截的逻辑，仅允许(type, interface)组合(cam_auth, sigAndAuth),(cam_list, checkResource)
(2) 明日计划：
- 继续测试内部接口分类分级的代码
(3) 是否存在问题：
- 在测试内部接口分类分级的代码，目前的流程是：本地创建新的test分支 -> 修改代码 -> build -> 上传到tke运行看输出
  想知道有无更高效的做法

2025-05-23
(1) 今日内容：
- 跑通了CLS日志获取的链路和获取AI模型的demo
- 更新cam_diff的代码，优化日志输出
- 参加周会
(2) 明日计划：
- 针对demo发现的问题做出修改
 - Prompt中强制固定AI输出，对AI的返回结果增加一些有效性解析步骤
 - 针对目前只有两个模型供调用的情况，简化代码的逻辑
- 更新数据库配置信息，尝试把完整程序启动，开始写入数据
(3) 是否存在问题：
- 无

1. 回退五分钟的能力
2. Prompt的写法里面：可能，但是


--- 
2025-05-26
(1) 今日内容：
- 跑完了对内部接口分类分级数据的第一版数据（风险文档、接口文档）
  - 当前可以得到日志数据的接口数：2141
  - 高危接口数：294，敏感接口数：1562
- 编写程序对内部接口分类分级跑的数据去重、补充风险文档和接口文档间的关联关系
- 完善内部接口分类分级的代码，支持在调用CLS、LLM服务连续失败达到阈值时主动熔断
- 根据第一版数据的反馈，修改Prompt
(2) 明日计划：
- 根据第一版数据过滤出来风险、敏感接口，使用第二版Prompt提供给LLM，看看效果
(3) 是否存在问题：
- 无

2025-05-27
(1) 今日内容：
- 根据第一版数据过滤出来风险、敏感接口，修改Prompt，寻找较好的Prompt效果
  - 当前可以得到日志数据的接口数：2141
  - 原高危接口数：294
  - 现高危接口数：102
(2) 明日计划：
- 继续改Prompt
(3) 是否存在问题：
- 无

2025-05-28
(1) 今日内容：
- 修改Prompt后重跑了之前的全量接口，导出文档
- 修改cam_diff，使之接入北极星，支持多Forward转发
- 对于cam_diff, 拆分entrypoint.sh和start.sh，增加保活逻辑
- 对于cam_diff，修改Action的匹配逻辑：根据request包的InterfaceName，而不是外部的Action
(2) 明日计划：
- 测试修改后的cam_diff功能是否正常
- 处理找日志需求的工单
(3) 是否存在问题：
- 无

2025-05-29
(1) 今日内容：
- 针对工单的需求，查阅TDW相关文档，考虑实现方案：
  1. 使用pySql，注册数据源a（过滤接口的数据源）到wedata
  2. 注册数据源b到wedata（写入结果的目的数据源）
  3. 直接在wedata平台上执行，不再通过统一调度平台us跑tdw出库mysql的任务
  4. 在pySql中将查询结果解析，写入数据源b
- 修改之前的cam_diff测试项目中udp_client，增加“回退五分钟”的能力
(2) 明日计划：
- 针对当前工单解决方案编码实现
- 继续修改udp_client
(3) 是否存在问题：
- wedata注册数据源a需要连接信息（用户，密码，ip，port），这些信息是否方便给出去

2025-05-30
(1) 今日内容：
- 完成对udp_client的改造
- 参加周会
- 工单的需要的数据已经导出了一部分，其余的需要更改时间去捞取
(2) 明日计划：
- 放假
(3) 是否存在问题：
- 无

2025-05-30
(1) 今日内容：
- 完成对udp_client的改造
- 参加周会
- 工单的需要的数据已经导出了一部分，其余的需要更改时间去捞取
(2) 明日计划：
- 放假
(3) 是否存在问题：
- 无

2025-06-03
(1) 今日内容：
1. 扩大了日志TDW的检索范围，但没有检索到新的数据
2. 从TDW之外再从CLS去捞取目标接口的日志
3. 测试了udp_client的CLS转发和cam_diff的获取北极星地址功能
4. 修改docker-entrypoint.sh，每次启动会固定往crontab写入新的任务，已修改为先创建空文件覆盖原有的任务
(2) 明日计划：
1. 跑通从udp_client到cam_diff服务转发的完整链路
2. 增加cam_diff的日志分级
(3) 是否存在问题：
1. 今天尝试把client和diff连起来的时候，发现client有发送成功的日志，但是diff没有接收成功的日志输出，转发的日志输出，已经排除的规则匹配的问题。之前把日志都删了，不好排查，做一下日志分级可能比直接删日志可能好些

2025-06-04
(1) 今日内容：
1. 跑通了client到diff的链路，同步新的变化到cam_diff说明文档：https://iwiki.woa.com/p/4014602929
2. 新增cam_diff的日志分级功能，优化输出格式、代码结构
3. 继续从tdw、cls跑任务捞数据
(2) 明日计划：
1. udp_client增加过滤，多转发的功能
(3) 是否存在问题：
1.无

2025-06-05
(1) 今日内容：
1. 改cam_diff解json包报错的Bug
2. 增加udp_client的过滤、多转发能力，写对应的说明文档
3. 增加udp_client的配置时间段搜索能力。由于cls对单次查询结果有999的limit限制，对于时间区间过长的项，拆成三秒每批执行
4. 修改cam_diff_udp_client, cam_diff_client流水线配置使tag标签符合规范
(2) 明日计划：
1. 解决遇到的问题：更换过滤实现方案 or 建索引，个人推荐
2. 线下参加活动：「风险SQL治理&SQL注入防护」主题沙龙
(3) 是否存在问题：
1. 当前实现中，client的过滤是在cls端（鉴权日志）实现的，即通过query查询条件过滤，在action等字段的过滤中，cls端会因为字段没有建立索引而报错无法检索
2. 由于当前过滤的实现依赖cls日志检索条件，uin字段（long类型）无法完全支持模糊查询，比如支持"*"，但不支持"1*"、"*1"、"*1*"

2025-06-06
(1) 今日内容：
1. 解决了昨天的问题，完成了udp_client的过滤功能
2. 参加「风险SQL治理&SQL注入防护」主题沙龙
3. 修改cam_log，使之可以配置指定到cam_diff的比例
4. 修改cam_log，使之具备热重启的能力ing...
(2) 明日计划：
1. 测试对cam_log的改动是否生效
(3) 是否存在问题：  
1. 无

2025-06-09
(1) 今日内容：
1. 合并cam_diff分支，按照AI的评审意见修改代码
2. 复制tke环境，测试了cam_log热重启和配置转发到cam_diff的比例的功能: https://iwiki.woa.com/p/4015191159
3. 找工单需要的接口日志
(2) 明日计划：
1. 改生成接口文档的Prompt，跑第二版数据
(3) 是否存在问题：
1. 无

2025-06-10
(1) 今日内容：
1. 排查cam_diff的Actions匹配异常的BUG修复
2. 排查cam_diff的热重启偶尔会出现连续重启的BUG并修复
3. 跑工单新增加的需要的接口的日志
(2) 明日计划：
1. 改代码和生成接口文档的Prompt，跑第二版数据
(3) 是否存在问题：
1. 无

2025-06-11
(1) 今日内容：
1. 参加【CAM】预案平台调度演习会议
2. 修改Prompt，生成第二版接口文档数据生成（780/1900+）
3. 学习k8s相关概念，整理文档：https://iwiki.woa.com/p/4015208869
4. 了解鉴权接口协议：https://iwiki.woa.com/p/4008571186
5. 捞取找日志需求工单今日新增的日志数据，同步给需求方
(2) 明日计划：
1. 受限于签名有效期，需要更改此前客户端回退五分钟的实现方案
  - 鉴权日志：https://dddd.woa.com/kit/platform/log/authentication
  - 接口协议：https://iwiki.woa.com/p/4008571186
2. 监控剩余接口文档的生成
3. 了解helix的流程、background
(3) 是否存在问题：
1. 无

2025-06-12
(1) 今日内容：
1. 了解helix的技术方案、项目代码、DB设计
2. 改造cam_diff客户端，根据日志req，rsp包构造mode2鉴权请求刷缓存，并测试
3. 捞取找日志需求工单今日新增的日志数据，同步给需求方
4. 跑余量接口文档数据（1345/1900+）
(2) 明日计划：
1. 处理新需求：找market这里的接口日志
2. 改造helix，增加适配层使之可以方便地切换模型服务
(3) 是否存在问题：
1. 无

2025-06-13
(1) 今日内容：
1. 了解helix请求的流程，对于生成代码的Prompt，对比deepseek r1模型和deepseek v3的生成效果
2. 跑余量接口文档数据（1653/1900+）
3. 写sql从tdw查询market工单需要的接口日志
(2) 明日计划：
1. 了解helix-backend的各个控制器所负责的功能
(3) 是否存在问题：
1. 无

--- 

2025-06-16
(1) 今日内容：
1. 排查、修复helix需求分析步骤json反序列化BUG(sessi_d: dbc05297-a337-4f3f-85d0-73f927cbb6cd)
2. 对比deepseek-r1、deepseek-v3、claude-4-sonnet、Qwen3-258B模型的生成效果。目前看准确度：r1略优于v3、HunYuan优于Qwen3、Claude-4-Sonnet
3. 增加cam_diff_client的健康检查、启停脚本，接入七彩石配置
4. 跑完了第二版接口文档数据(https://zhiyan.woa.com/plugin_sqlmanager/10640/dbchange_sql/database_instance?type=app&app_id=80908&dbname=)
5. 写redis拨测的代码ing
(2) 明日计划：
1. 「helix」取成功的任务案例，拿sess_id到日志平台找日志，跟着代码走主要的请求链路(content:"4c39736e-8589-4978-aef5-7516754372e9")
2. 「redis拨测」继续实现
(3) 是否存在问题：
1. 无

2025-06-17
(1) 今日内容：
1. 开发完增加redis拨测功能，并本地测试正常
2. 结合日志&代码读helix的请求链路
(2) 明日计划：
1. 配置cam_diff_client的工作负载
2. 熟悉helix代码
(3) 是否存在问题：
1. 无

2025-06-18
(1) 今日内容：
1. redis拨测代码提MR，根据评审意见修改代码
2. 修改卷积函数适配信号系统版本的Prompt
(2) 明日计划：
1. 改cam_diff_client后置脚本，修复原client停止时推送配置没有按预期启动服务的BUG  
2. 部署工作负载跑cam_diff_client服务
3. 补充编解码器和api映射关系的代码
(3) 是否存在问题：
1. 无

2025-06-19
(1) 今日内容：
1. 完善redis拨测代码，统一采用小写匹配，增加context超时的告警信息
2. 补充编解码器和api映射关系的代码
3. 观摩seans的redis拨测发布
4. 修改卷积的处理策略为两两对称处理ing
(2) 明日计划：
1. 修改卷积的处理策略为两两对称处理
(3) 是否存在问题：
1. 无


2025-06-20
(1) 今日内容：
1. 增加卷积的处理策略为两两一组对称处理，已实现，未推送
2. 增加策略模式代码，便于后续增加并调试更多卷积策略
3. 修改redis拨测的代码，适当增加日志输出
(2) 明日计划：
1. 新增一种卷积处理策略：api成环，顺时针卷，控制卷的圈数，比如5个api，4轮情况下，和两两一组对称卷的次数一致。期望是通过卷多轮的情况使得每个api都可以吸纳其他api的设计优点，复杂度2N（N为api节点数）
(3) 是否存在问题：
1. 无

2025-06-23
(1) 今日内容：
1. helix增加卷积的api成环多轮次处理策略
2. 优化cam_diff客户端代码，修改七彩石的后置脚本并测试，减少不必要的文件被打包进镜像，增加部署cam_diff客户端工作负载
(2) 明日计划：
1. 查看新策略生成效果，据此调整
(3) 是否存在问题：
1. 无

2025-06-24
(1) 今日内容：
1. 增加optimizeCount，改Prompt，在优化api协议时遇到相似语义的场景下偏向于optimizeCount大者
2. 优化helix卷积部分代码结构，分离分区策略和成双成环策略接口
3. 海外地域的redis拨测发布
(2) 明日计划：
1. 查看修改后生成效果，据此调整
(3) 是否存在问题：
1. 无

2025-06-25
(1) 今日内容：
1. 观察新策略的api协议生成效果。较复杂应用(appid=41c4d4e4-8e68-45d9-9dbc-ad80a8df0a4c)，没有出现同名不同实现的数据实体
2. 找BUG：在api协议生成时有概率生成中文name，错误地继续进入反思环节，导致错误。appid=41c4d4e4-8e68-45d9-9dbc-ad80a8df0a4c，generateChartData方法
(2) 明日计划：
1. redis拨测国内其他地域发布
2. 通过流程变更数据库redis实例ip模拟故障，验证redis拨测的告警模块
3. 给helix提相对复杂的需求，在不考虑时间的情况下对其做“压测”，检查健壮性
4. 看helix生成的代码，检查逻辑写的是否有问题，是否按照logic字段描述的步骤走等
(3) 是否存在问题：
1. 无

2025-06-26
(1) 今日内容：
1. 部署错误纠错阶段增加claude模型的调用
2. redis拨测国内其他地域发布
3. 使用helix尝试生成复杂webapp：https://dddd.woa.com/helix/task?id=a04c8726-1864-4221-b81c-49ed9271f257
(2) 明日计划：
1. 跑应用查看helix的代码生成，找bug
(3) 是否存在问题：
1. 无

